---
layout: post
title: <font color=#DC143C>案例二：一个智能收件箱系统</font>
subtitle: 一个简单的排序算法
bigimg: /pics/20170219/01.jpg
tags: [<font color=#FFE4C4>邮件优先级, log加权策略, 线程活跃度</font>]
---

&emsp;&emsp;在上一个案例中，我们建立了一个垃圾邮件的识别系统。在本例中，我们将继续对这些邮件进行处理。选取文件夹`easy_ham`中的易识别的正常邮件作为本例的数据来源，并将其中的一半数据作为训练集使用，另一半即为测试集。我们试图寻找一些能够影响邮件优先级的特征进行量化处理，从而可以将邮件根据这些值进行排序，这就是我们建立一个智能收件箱的排序系统的基本原理。

### 邮件优先级的特征和量化

&emsp;&emsp;那么，什么特征适合衡量一封邮件的优先级呢？我们参照了一些相关资料，大致确定出以下五项特征作为评判一份邮件优先级的量化标准。

1. **社交特征**。如果发件人与收件人之间的交互频繁，那么可以认为来自该发件人的邮件对于收件人来说是重要的。因此在量化邮件优先级时，社交特征这方面应分配一定的权重。
2. **线程的活跃度**。我们发现，一些邮件的主题`(Subject)`是以`"Re:"`开头的，说明这是某一线程的一部分，那么该线程是一个活跃的线程，我们可以认为收件人重视这样的主题内容，故在计算邮件优先级时，应给此类邮件赋予一个相对较高的权重。
3. **发件人在线程内的活跃度**。通常情况下，对于在活跃线程内的发件人，收件人更倾向于处理其发送的邮件。因此，此项也是考量的内容之一。
4. **活跃线程的词项**。有些词汇可能频繁地出现在活跃的线程当中，很可能是收件人对这方面感兴趣。因此，当一份邮件的主题中出现这样的高频词项，那么，我们认为这封邮件对于收件人来说是具有优先的地位的。
5. **所有邮件共有词项**。为了使排序的结果尽可能地准确和科学，我们需要利用更加全面的信息，所有邮件的共有词项是一个不错的选择。

&emsp;&emsp;但是，具体量化邮件优先级的方式是什么呢？对于每一封邮件，我们都能将以上的五个特征提取出来，其值均为相应的频数。然后利用*log*加权的策略，我们可以将其频数值进行对数变换，使得彼此之间的差距不至于过大，而又存在差别，这是一个非常有用的技巧。最后，我们将所有权重相乘，最终得到该邮件优先级的量化值。可以看出，这种想法其实非常简单，但不失为一种可行的方法。
